<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ£’çƒéŠæˆ²çƒå“¡ç®¡ç†ç³»çµ±</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #dcfce7 100%);
            min-height: 100vh;
            padding: 1.5rem;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .title {
            font-size: 1.875rem;
            font-weight: bold;
            color: #1f2937;
        }
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }
        .btn-primary { background: #2563eb; color: white; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-success { background: #16a34a; color: white; }
        .btn-success:hover { background: #15803d; }
        .btn-purple { background: #9333ea; color: white; }
        .btn-purple:hover { background: #7e22ce; }
        .btn-secondary { background: #e5e7eb; color: #374151; }
        .btn-secondary:hover { background: #d1d5db; }
        .btn-light-blue { background: #dbeafe; color: #1e40af; }
        .btn-light-blue:hover { background: #bfdbfe; }
        .btn-light-green { background: #dcfce7; color: #166534; }
        .btn-light-green:hover { background: #bbf7d0; }
        .btn-sm { padding: 0.375rem; }
        .tabs {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            align-items: center;
        }
        .tab {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            font-size: 0.875rem;
        }
        .tab.active { background: #2563eb; color: white; }
        .tab.inactive { background: #e5e7eb; color: #374151; }
        .tab.inactive:hover { background: #d1d5db; }
        .tab.player.active { background: #16a34a; }
        .label {
            font-weight: 600;
            color: #374151;
            margin-right: 0.5rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }
        th, td {
            border: 1px solid #d1d5db;
            padding: 0.75rem;
            text-align: left;
        }
        th {
            background: #f3f4f6;
            font-weight: 600;
        }
        tr:hover {
            background: #f9fafb;
        }
        input, select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            font-size: 0.875rem;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        input:disabled {
            background: #f3f4f6;
            cursor: not-allowed;
        }
        .section-title {
            font-size: 1.25rem;
            font-weight: bold;
            color: #1e40af;
            border-bottom: 2px solid #93c5fd;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            padding: 1rem;
        }
        .modal-content {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 20px 25px rgba(0,0,0,0.15);
            max-width: 1000px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 1.5rem;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
        }
        .close-btn {
            background: none;
            border: none;
            font-size: 2rem;
            color: #6b7280;
            cursor: pointer;
            line-height: 1;
        }
        .close-btn:hover { color: #374151; }
        .settings-section { margin-bottom: 1.5rem; }
        .settings-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 0.75rem;
        }
        .input-group {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .skill-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        .skill-card {
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        .skill-card-title {
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        .skill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f9fafb;
            padding: 0.5rem;
            border-radius: 0.375rem;
            margin-bottom: 0.25rem;
        }
        .delete-btn {
            background: none;
            border: none;
            color: #dc2626;
            cursor: pointer;
            font-size: 0.875rem;
        }
        .delete-btn:hover { color: #991b1b; }
        .overflow-x { overflow-x: auto; }
        .flex-gap { display: flex; gap: 0.5rem; align-items: center; }
        input[type="text"].inline-edit {
            background: transparent;
            border: none;
            outline: none;
            width: 5rem;
            padding: 0;
        }
        input[type="text"].inline-edit:focus {
            box-shadow: none;
        }
        .edit-input {
            padding: 0.5rem 0.75rem;
            border: 2px solid #3b82f6;
            border-radius: 0.5rem;
        }
        .section-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const RosterSection = ({ title, category, count, isPitcher, roster, updateRosterItem, skillOptions, coachOptions }) => {
            return (
                <div style={{ marginBottom: '2rem' }}>
                    <h3 className="section-title">
                        {title} ({count}äºº)
                    </h3>
                    <div className="overflow-x">
                        <table>
                            <thead>
                                <tr>
                                    <th style={{ width: '60px' }}>ä½ç½®</th>
                                    <th style={{ width: '180px' }}>çƒå“¡å§“å</th>
                                    <th>æŠ€èƒ½1</th>
                                    <th>æŠ€èƒ½2</th>
                                    <th>æŠ€èƒ½3</th>
                                    <th>æ•™ç·´1</th>
                                    <th style={{ width: '150px' }}>æ•™ç·´2æŠ€èƒ½</th>
                                    <th style={{ width: '80px' }}>ç­‰ç´š</th>
                                    <th style={{ width: '120px' }}>å‚™è¨»</th>
                                </tr>
                            </thead>
                            <tbody>
                                {roster.map((item, idx) => (
                                    <tr key={`${category}-${idx}`}>
                                        <td style={{ textAlign: 'center', fontWeight: 600 }}>
                                            {title === 'å…ˆç™¼æŠ•æ‰‹' ? `å…ˆç™¼${idx + 1}` :
                                             title === 'å¾Œæ´æŠ•æ‰‹' ? `å¾Œæ´${idx + 1}` :
                                             `${idx + 1}æ£’`}
                                        </td>
                                        <td>
                                            <input
                                                type="text"
                                                value={item.name}
                                                onChange={(e) => updateRosterItem(category, idx, 'name', e.target.value)}
                                                placeholder="è¼¸å…¥çƒå“¡å§“å"
                                            />
                                        </td>
                                        {['skill1', 'skill2', 'skill3'].map((skill, skillIdx) => (
                                            <td key={skill}>
                                                <select
                                                    value={item[skill]}
                                                    onChange={(e) => updateRosterItem(category, idx, skill, e.target.value)}
                                                >
                                                    <option value="">é¸æ“‡æŠ€èƒ½</option>
                                                    {isPitcher && (
                                                        <>
                                                            {skillIdx === 0 && (
                                                                <optgroup label="æŠ•æ‰‹é»‘æŠ€">
                                                                    {skillOptions.pitcherType1.map((option) => (
                                                                        <option key={option} value={option}>{option}</option>
                                                                    ))}
                                                                </optgroup>
                                                            )}
                                                            <optgroup label="æŠ•æ‰‹é‡‘æŠ€">
                                                                {skillOptions.pitcherType2.map((option) => (
                                                                    <option key={option} value={option}>{option}</option>
                                                                ))}
                                                            </optgroup>
                                                        </>
                                                    )}
                                                    {!isPitcher && (
                                                        <>
                                                            {skillIdx === 0 && (
                                                                <optgroup label="æ‰“è€…é»‘æŠ€">
                                                                    {skillOptions.batterType1.map((option) => (
                                                                        <option key={option} value={option}>{option}</option>
                                                                    ))}
                                                                </optgroup>
                                                            )}
                                                            <optgroup label="æ‰“è€…é‡‘æŠ€">
                                                                {skillOptions.batterType2.map((option) => (
                                                                    <option key={option} value={option}>{option}</option>
                                                                ))}
                                                            </optgroup>
                                                        </>
                                                    )}
                                                </select>
                                            </td>
                                        ))}
                                        <td>
                                            <select
                                                value={item.coach1}
                                                onChange={(e) => updateRosterItem(category, idx, 'coach1', e.target.value)}
                                            >
                                                <option value="">ç™½æ•™</option>
                                                {isPitcher && coachOptions.pitcherCoach1.map((option) => (
                                                    <option key={option} value={option}>{option}</option>
                                                ))}
                                                {!isPitcher && coachOptions.batterCoach1.map((option) => (
                                                    <option key={option} value={option}>{option}</option>
                                                ))}
                                            </select>
                                        </td>
                                        <td>
                                            <select
                                                value={item.coach2Skill}
                                                onChange={(e) => updateRosterItem(category, idx, 'coach2Skill', e.target.value)}
                                            >
                                                <option value="">ç™½æŠ€</option>
                                                {isPitcher && skillOptions.pitcherType1.map((option) => (
                                                    <option key={option} value={option}>{option}</option>
                                                ))}
                                                {!isPitcher && skillOptions.batterType1.map((option) => (
                                                    <option key={option} value={option}>{option}</option>
                                                ))}
                                            </select>
                                        </td>
                                        <td>
                                            <select
                                                value={item.coach2Level}
                                                onChange={(e) => updateRosterItem(category, idx, 'coach2Level', e.target.value)}
                                                disabled={!item.coach2Skill}
                                            >
                                                <option value="">ç­‰ç´š</option>
                                                {isPitcher && coachOptions.pitcherCoach2Levels.map((level) => (
                                                    <option key={level} value={level}>{level}</option>
                                                ))}
                                                {!isPitcher && coachOptions.batterCoach2Levels.map((level) => (
                                                    <option key={level} value={level}>{level}</option>
                                                ))}
                                            </select>
                                        </td>
                                        <td>
                                            <input
                                                type="text"
                                                value={item.coach2Note || ''}
                                                onChange={(e) => updateRosterItem(category, idx, 'coach2Note', e.target.value)}
                                                placeholder="å‚™è¨»"
                                                disabled={!item.coach2Skill}
                                            />
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        const BaseballRosterManager = () => {
            const [clubs, setClubs] = useState([
                { id: 1, name: 'ä¿±æ¨‚éƒ¨A', players: [{ id: 1, name: 'ç©å®¶1', roster: initializeRoster() }] }
            ]);
            const [activeClub, setActiveClub] = useState(0);
            const [activePlayer, setActivePlayer] = useState(0);
            const [showSettings, setShowSettings] = useState(false);
            const [editingClubName, setEditingClubName] = useState(null);

            const [skillOptions, setSkillOptions] = useState({
                pitcherType1: ['å·¥ä½œé¦¬', 'ç²¾æº–æ§çƒ', 'é€Ÿçƒå‹æŠ•æ‰‹', 'å®Œç¾å…ˆç”Ÿ', 'ç‰›æ£šæ—¥', 'æŠ•æ‰‹é»˜å¥‘', 'æŠ•æ‰‹æ´å¯ŸåŠ›', 'å…¨åŠ›æŠ•çƒ', 'å…ˆå®ˆå¾Œæ”»'],
                pitcherType2: ['æŠ€å·§æ´¾æŠ•æ‰‹', 'å£“å€’æ€§æŠ•æ‰‹', 'å¤§å¹…å±€æ•¸', 'æœ€å¾Œå¤§é­”ç‹', 'äº¤éŒ¯ä¹‹ç«', 'è‡ªæˆ‘è§£æ±º', 'ç‹ç‰Œ', 'é¬¥å¿—', 'ç‹ç‰Œçµ‚çµè€…', 'æ»¾åœ°çƒæŠ•æ‰‹', 'å·¨äººæ®ºæ‰‹', 'æŠ•çƒå”èª¿è€…', 'æ±ºå‹çƒ', 'ç„¡æ³•ç¢°è§¸'],
                batterType1: ['ç²¾æº–æ‰“æ“Š', 'å…ˆé‹’', 'å£˜çƒæ‰“è€…', 'å¤©ç”Ÿå·¨æ˜Ÿ', 'æ‰“è€…é»˜å¥‘', 'æ‰“è€…æ´å¯ŸåŠ›', 'æœ€å¼·æ‰“è€…', 'æ©Ÿæœƒè£½é€ è€…', 'è€æ‰‹'],
                batterType2: ['å¼·åŒ–å„ªé»', 'é çŸ¥èƒ½åŠ›', 'è¶…èƒ½ç¥è©±', 'é›·å°„è‚©', 'è¶…ç´šå¼·æ‰“', 'å»£è§’æ‰“è€…', 'è®“çœ¾çŸšç›®', 'äº”æ‹å­çƒå“¡', 'è¶…ç´šè¼”åŠ©', 'ç‹ç‰Œæ®ºæ‰‹', 'æ‰“æ“Šæ©Ÿå™¨', 'ç›œå£˜å¤©ç‹', 'è‡ªèµ°ç ²']
            });

            const [coachOptions, setCoachOptions] = useState({
                pitcherCoach1: ['å£“è¿«æ„Ÿ', 'é‚Šè§’çƒå¤§å¸«', 'äº‚çƒ', 'çƒæ£’ç ´å£è€…', 'ä¸Šå‡å¿«é€Ÿçƒ'],
                batterCoach1: ['å…¨å£˜æ‰“', 'å¼·æ‰“è€…', 'å¹³é£›çƒ', 'æ‰“æ“Šç‹', 'éµå£å®ˆå‚™', 'é¸çƒçœ¼', 'æ‰“æ“Šéµäºº', 'çŒœçƒæ‰“è€…'],
                pitcherCoach2Levels: ['I', 'II', 'III'],
                batterCoach2Levels: ['I', 'II', 'III']
            });

            function initializeRoster() {
                return {
                    startingPitchers: Array(5).fill().map((_, i) => ({
                        id: `sp-${i}`,
                        name: '',
                        skill1: '',
                        skill2: '',
                        skill3: '',
                        coach1: '',
                        coach2Skill: '',
                        coach2Level: '',
                        coach2Note: ''
                    })),
                    reliefPitchers: Array(6).fill().map((_, i) => ({
                        id: `rp-${i}`,
                        name: '',
                        skill1: '',
                        skill2: '',
                        skill3: '',
                        coach1: '',
                        coach2Skill: '',
                        coach2Level: '',
                        coach2Note: ''
                    })),
                    batters: Array(9).fill().map((_, i) => ({
                        id: `b-${i}`,
                        name: '',
                        skill1: '',
                        skill2: '',
                        skill3: '',
                        coach1: '',
                        coach2Skill: '',
                        coach2Level: '',
                        coach2Note: ''
                    }))
                };
            }

            const addClub = () => {
                const newClub = {
                    id: clubs.length + 1,
                    name: `ä¿±æ¨‚éƒ¨${String.fromCharCode(65 + clubs.length)}`,
                    players: [{ id: 1, name: 'ç©å®¶1', roster: initializeRoster() }]
                };
                setClubs([...clubs, newClub]);
                setActiveClub(clubs.length);
                setActivePlayer(0);
            };

            const deleteClub = (index) => {
                if (clubs.length === 1) {
                    alert('è‡³å°‘éœ€è¦ä¿ç•™ä¸€å€‹ä¿±æ¨‚éƒ¨!');
                    return;
                }
                const newClubs = clubs.filter((_, i) => i !== index);
                setClubs(newClubs);
                setActiveClub(Math.max(0, activeClub - 1));
                setActivePlayer(0);
            };

            const addPlayer = () => {
                const newClubs = [...clubs];
                const currentPlayers = newClubs[activeClub].players;
                const newPlayer = {
                    id: currentPlayers.length + 1,
                    name: `ç©å®¶${currentPlayers.length + 1}`,
                    roster: initializeRoster()
                };
                newClubs[activeClub].players.push(newPlayer);
                setClubs(newClubs);
                setActivePlayer(currentPlayers.length);
            };

            const deletePlayer = (index) => {
                const newClubs = [...clubs];
                if (newClubs[activeClub].players.length === 1) {
                    alert('æ¯å€‹ä¿±æ¨‚éƒ¨è‡³å°‘éœ€è¦ä¿ç•™ä¸€ä½ç©å®¶!');
                    return;
                }
                newClubs[activeClub].players = newClubs[activeClub].players.filter((_, i) => i !== index);
                setClubs(newClubs);
                setActivePlayer(Math.max(0, activePlayer - 1));
            };

            const updatePlayerName = (index, newName) => {
                const newClubs = [...clubs];
                newClubs[activeClub].players[index].name = newName;
                setClubs(newClubs);
            };

            const updateRosterItem = (category, index, field, value) => {
                const newClubs = [...clubs];
                newClubs[activeClub].players[activePlayer].roster[category][index][field] = value;
                setClubs(newClubs);
            };

            const exportData = () => {
                const workbook = XLSX.utils.book_new();
                const sheetData = [];
                
                // æ·»åŠ è¡¨é ­
                sheetData.push(['ä¿±æ¨‚éƒ¨', 'ç©å®¶', 'éšŠä¼', 'çƒå“¡å§“å', 'ä½ç½®', 'æŠ€èƒ½1', 'æŠ€èƒ½2', 'æŠ€èƒ½3', 'æ•™ç·´1', 'æ•™ç·´2']);
                
                // éæ­·æ‰€æœ‰ä¿±æ¨‚éƒ¨å’Œç©å®¶
                clubs.forEach((club) => {
                    club.players.forEach((player) => {
                        // å…ˆç™¼æŠ•æ‰‹
                        player.roster.startingPitchers.forEach((p, idx) => {
                            const coach2 = p.coach2Skill 
                                ? `${p.coach2Skill}${p.coach2Level ? ' ' + p.coach2Level : ''}${p.coach2Note ? ' (' + p.coach2Note + ')' : ''}`
                                : '';
                            
                            sheetData.push([
                                club.name,
                                player.name,
                                'å…ˆç™¼æŠ•æ‰‹',
                                p.name || '',
                                `å…ˆç™¼${idx + 1}`,
                                p.skill1 || '',
                                p.skill2 || '',
                                p.skill3 || '',
                                p.coach1 || '',
                                coach2
                            ]);
                        });
                        
                        // å¾Œæ´æŠ•æ‰‹
                        player.roster.reliefPitchers.forEach((p, idx) => {
                            const coach2 = p.coach2Skill 
                                ? `${p.coach2Skill}${p.coach2Level ? ' ' + p.coach2Level : ''}${p.coach2Note ? ' (' + p.coach2Note + ')' : ''}`
                                : '';
                            
                            sheetData.push([
                                club.name,
                                player.name,
                                'å¾Œæ´æŠ•æ‰‹',
                                p.name || '',
                                `å¾Œæ´${idx + 1}`,
                                p.skill1 || '',
                                p.skill2 || '',
                                p.skill3 || '',
                                p.coach1 || '',
                                coach2
                            ]);
                        });
                        
                        // æ‰“è€…é™£å®¹
                        player.roster.batters.forEach((b, idx) => {
                            const coach2 = b.coach2Skill 
                                ? `${b.coach2Skill}${b.coach2Level ? ' ' + b.coach2Level : ''}${b.coach2Note ? ' (' + b.coach2Note + ')' : ''}`
                                : '';
                            
                            sheetData.push([
                                club.name,
                                player.name,
                                'æ‰“è€…',
                                b.name || '',
                                `${idx + 1}æ£’`,
                                b.skill1 || '',
                                b.skill2 || '',
                                b.skill3 || '',
                                b.coach1 || '',
                                coach2
                            ]);
                        });
                    });
                });
                
                // å‰µå»ºå·¥ä½œè¡¨
                const worksheet = XLSX.utils.aoa_to_sheet(sheetData);
                
                // è¨­ç½®åˆ—å¯¬
                worksheet['!cols'] = [
                    { wch: 12 },  // ä¿±æ¨‚éƒ¨
                    { wch: 12 },  // ç©å®¶
                    { wch: 12 },  // éšŠä¼
                    { wch: 20 },  // çƒå“¡å§“å
                    { wch: 10 },  // ä½ç½®
                    { wch: 15 },  // æŠ€èƒ½1
                    { wch: 15 },  // æŠ€èƒ½2
                    { wch: 15 },  // æŠ€èƒ½3
                    { wch: 15 },  // æ•™ç·´1
                    { wch: 25 }   // æ•™ç·´2
                ];
                
                XLSX.utils.book_append_sheet(workbook, worksheet, 'çƒå“¡é™£å®¹');
                
                // åŒ¯å‡ºæª”æ¡ˆ
                XLSX.writeFile(workbook, 'baseball_roster_data.xlsx');
            };

            const SettingsModal = () => {
                const [newSkill, setNewSkill] = useState('');
                const [newCoach, setNewCoach] = useState('');
                const [selectedSkillType, setSelectedSkillType] = useState('pitcherType1');
                const [selectedCoachType, setSelectedCoachType] = useState('pitcherCoach1');

                const addSkill = () => {
                    if (newSkill.trim()) {
                        setSkillOptions({
                            ...skillOptions,
                            [selectedSkillType]: [...skillOptions[selectedSkillType], newSkill.trim()]
                        });
                        setNewSkill('');
                    }
                };

                const removeSkill = (type, skill) => {
                    setSkillOptions({
                        ...skillOptions,
                        [type]: skillOptions[type].filter(s => s !== skill)
                    });
                };

                const addCoach = () => {
                    if (newCoach.trim()) {
                        setCoachOptions({
                            ...coachOptions,
                            [selectedCoachType]: [...coachOptions[selectedCoachType], newCoach.trim()]
                        });
                        setNewCoach('');
                    }
                };

                const removeCoach = (type, coach) => {
                    setCoachOptions({
                        ...coachOptions,
                        [type]: coachOptions[type].filter(c => c !== coach)
                    });
                };

                if (!showSettings) return null;

                return (
                    <div className="modal">
                        <div className="modal-content">
                            <div className="modal-header">
                                <h2 className="modal-title">æŠ€èƒ½èˆ‡æ•™ç·´è¨­å®š</h2>
                                <button className="close-btn" onClick={() => setShowSettings(false)}>Ã—</button>
                            </div>

                            <div className="settings-section">
                                <h3 className="settings-title">æŠ€èƒ½é¸é …</h3>
                                
                                <div className="input-group">
                                    <select
                                        value={selectedSkillType}
                                        onChange={(e) => setSelectedSkillType(e.target.value)}
                                        style={{ width: 'auto' }}
                                    >
                                        <option value="pitcherType1">æŠ•æ‰‹é»‘æŠ€</option>
                                        <option value="pitcherType2">æŠ•æ‰‹é‡‘æŠ€</option>
                                        <option value="batterType1">æ‰“è€…é»‘æŠ€</option>
                                        <option value="batterType2">æ‰“è€…é‡‘æŠ€</option>
                                    </select>
                                    <input
                                        type="text"
                                        value={newSkill}
                                        onChange={(e) => setNewSkill(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && addSkill()}
                                        placeholder="æ–°å¢æŠ€èƒ½"
                                        style={{ flex: 1 }}
                                    />
                                    <button onClick={addSkill} className="btn btn-primary">æ–°å¢</button>
                                </div>

                                <div className="skill-grid">
                                    {Object.entries(skillOptions).map(([type, skills]) => (
                                        <div key={type} className="skill-card">
                                            <h4 className="skill-card-title">
                                                {type === 'pitcherType1' ? 'æŠ•æ‰‹é»‘æŠ€' :
                                                 type === 'pitcherType2' ? 'æŠ•æ‰‹é‡‘æŠ€' :
                                                 type === 'batterType1' ? 'æ‰“è€…é»‘æŠ€' : 'æ‰“è€…é‡‘æŠ€'}
                                            </h4>
                                            {skills.map((skill) => (
                                                <div key={skill} className="skill-item">
                                                    <span style={{ fontSize: '0.875rem' }}>{skill}</span>
                                                    <button onClick={() => removeSkill(type, skill)} className="delete-btn">
                                                        åˆªé™¤
                                                    </button>
                                                </div>
                                            ))}
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="settings-section">
                                <h3 className="settings-title">æ•™ç·´1é¸é …</h3>
                                
                                <div className="input-group">
                                    <select
                                        value={selectedCoachType}
                                        onChange={(e) => setSelectedCoachType(e.target.value)}
                                        style={{ width: 'auto' }}
                                    >
                                        <option value="pitcherCoach1">æŠ•æ‰‹æ•™ç·´1</option>
                                        <option value="batterCoach1">æ‰“è€…æ•™ç·´1</option>
                                    </select>
                                    <input
                                        type="text"
                                        value={newCoach}
                                        onChange={(e) => setNewCoach(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && addCoach()}
                                        placeholder="æ–°å¢æ•™ç·´é¸é …"
                                        style={{ flex: 1 }}
                                    />
                                    <button onClick={addCoach} className="btn btn-success">æ–°å¢</button>
                                </div>

                                <div className="skill-grid">
                                    <div className="skill-card">
                                        <h4 className="skill-card-title">æŠ•æ‰‹æ•™ç·´1</h4>
                                        {coachOptions.pitcherCoach1.map((coach) => (
                                            <div key={coach} className="skill-item">
                                                <span>{coach}</span>
                                                <button onClick={() => removeCoach('pitcherCoach1', coach)} className="delete-btn">
                                                    åˆªé™¤
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="skill-card">
                                        <h4 className="skill-card-title">æ‰“è€…æ•™ç·´1</h4>
                                        {coachOptions.batterCoach1.map((coach) => (
                                            <div key={coach} className="skill-item">
                                                <span>{coach}</span>
                                                <button onClick={() => removeCoach('batterCoach1', coach)} className="delete-btn">
                                                    åˆªé™¤
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <div style={{ marginTop: '1rem', padding: '1rem', background: '#f0f9ff', borderRadius: '0.5rem' }}>
                                    <h4 style={{ fontWeight: 600, marginBottom: '0.5rem', color: '#1e40af' }}>æ•™ç·´2èªªæ˜</h4>
                                    <ul style={{ paddingLeft: '1.5rem', fontSize: '0.875rem', color: '#374151' }}>
                                        <li>æŠ•æ‰‹æ•™ç·´2:å°æ‡‰æŠ•æ‰‹é»‘æŠ€,éœ€é¸æ“‡ç­‰ç´š (I/II/III) å’Œå‚™è¨»</li>
                                        <li>æ‰“è€…æ•™ç·´2:å°æ‡‰æ‰“è€…é»‘æŠ€,éœ€é¸æ“‡ç­‰ç´š (I/II/III) å’Œå‚™è¨»</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            return (
                <div className="container">
                    <div className="card">
                        <div className="header">
                            <h1 className="title">âš¾ æ£’çƒéŠæˆ²çƒå“¡ç®¡ç†ç³»çµ±</h1>
                            <div className="flex-gap">
                                <button onClick={() => setShowSettings(true)} className="btn btn-purple">
                                    âš™ï¸ è¨­å®š
                                </button>
                                <button onClick={exportData} className="btn btn-success">
                                    ğŸ“Š åŒ¯å‡ºExcel
                                </button>
                            </div>
                        </div>

                        <div className="section-row">
                            <span className="label">ä¿±æ¨‚éƒ¨:</span>
                            <div className="tabs">
                                {clubs.map((club, index) => (
                                    <div key={club.id} className="flex-gap">
                                        {editingClubName === index ? (
                                            <div className="flex-gap">
                                                <input
                                                    type="text"
                                                    value={club.name}
                                                    onChange={(e) => {
                                                        const newClubs = [...clubs];
                                                        newClubs[index].name = e.target.value;
                                                        setClubs(newClubs);
                                                    }}
                                                    onKeyPress={(e) => {
                                                        if (e.key === 'Enter') setEditingClubName(null);
                                                    }}
                                                    className="edit-input"
                                                    autoFocus
                                                    style={{ width: '150px' }}
                                                />
                                                <button
                                                    onClick={() => setEditingClubName(null)}
                                                    className="btn btn-primary btn-sm"
                                                >
                                                    âœ“
                                                </button>
                                            </div>
                                        ) : (
                                            <>
                                                <button
                                                    onClick={() => {
                                                        setActiveClub(index);
                                                        setActivePlayer(0);
                                                    }}
                                                    className={`tab ${activeClub === index ? 'active' : 'inactive'}`}
                                                >
                                                    {club.name}
                                                </button>
                                                <button
                                                    onClick={() => setEditingClubName(index)}
                                                    className="btn btn-secondary btn-sm"
                                                >
                                                    âœï¸
                                                </button>
                                                {clubs.length > 1 && (
                                                    <button
                                                        onClick={() => deleteClub(index)}
                                                        className="btn btn-secondary btn-sm"
                                                        style={{ color: '#dc2626' }}
                                                    >
                                                        ğŸ—‘ï¸
                                                    </button>
                                                )}
                                            </>
                                        )}
                                    </div>
                                ))}
                                <button onClick={addClub} className="btn btn-light-blue">
                                    â• æ–°å¢ä¿±æ¨‚éƒ¨
                                </button>
                            </div>
                        </div>

                        <div className="section-row">
                            <span className="label">ç©å®¶:</span>
                            <div className="tabs">
                                {clubs[activeClub].players.map((player, index) => (
                                    <div key={`player-${player.id}`} className="flex-gap">
                                        <button
                                            onClick={() => setActivePlayer(index)}
                                            className={`tab player ${activePlayer === index ? 'active' : 'inactive'}`}
                                        >
                                            {player.name}
                                        </button>
                                        <button
                                            onClick={() => {
                                                const newName = prompt('è«‹è¼¸å…¥ç©å®¶åç¨±:', player.name);
                                                if (newName !== null && newName.trim() !== '') {
                                                    updatePlayerName(index, newName.trim());
                                                }
                                            }}
                                            className="btn btn-secondary btn-sm"
                                        >
                                            âœï¸
                                        </button>
                                        {clubs[activeClub].players.length > 1 && (
                                            <button
                                                onClick={() => deletePlayer(index)}
                                                className="btn btn-secondary btn-sm"
                                                style={{ color: '#dc2626' }}
                                            >
                                                ğŸ—‘ï¸
                                            </button>
                                        )}
                                    </div>
                                ))}
                                <button onClick={addPlayer} className="btn btn-light-green">
                                    â• æ–°å¢ç©å®¶
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="card">
                        <h2 style={{ fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '1.5rem', color: '#1f2937' }}>
                            {clubs[activeClub].name} - {clubs[activeClub].players[activePlayer].name} çš„é™£å®¹
                        </h2>
                        
                        <RosterSection 
                            title="å…ˆç™¼æŠ•æ‰‹" 
                            category="startingPitchers" 
                            count={5} 
                            isPitcher={true}
                            roster={clubs[activeClub].players[activePlayer].roster.startingPitchers}
                            updateRosterItem={updateRosterItem}
                            skillOptions={skillOptions}
                            coachOptions={coachOptions}
                        />
                        <RosterSection 
                            title="å¾Œæ´æŠ•æ‰‹" 
                            category="reliefPitchers" 
                            count={6} 
                            isPitcher={true}
                            roster={clubs[activeClub].players[activePlayer].roster.reliefPitchers}
                            updateRosterItem={updateRosterItem}
                            skillOptions={skillOptions}
                            coachOptions={coachOptions}
                        />
                        <RosterSection 
                            title="æ‰“è€…é™£å®¹" 
                            category="batters" 
                            count={9} 
                            isPitcher={false}
                            roster={clubs[activeClub].players[activePlayer].roster.batters}
                            updateRosterItem={updateRosterItem}
                            skillOptions={skillOptions}
                            coachOptions={coachOptions}
                        />
                    </div>

                    <SettingsModal />
                </div>
            );
        };

        ReactDOM.render(<BaseballRosterManager />, document.getElementById('root'));
    </script>
</body>
</html>